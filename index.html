<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Marked in the browser</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>


  <div id="container">

    <div id="place">
      <textarea name="input" id="content" cols="80" rows="60"># h1 Heading 
## h2 Heading
### h3 Heading
#### h4 Heading
##### h5 Heading
###### h6 Heading


##Horizontal Rules

---



##Emphasis

*This is bold text*
^This is italic text^
~Strikethrough~

##empty lines 
n/</textarea>
      <button onclick="update()">Goooo</button>
    </div>

    <div id="rendered">
    </div>

  </div>  

h

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</body>
</html>


  <script>
  var User_input = "";
  var lines = [];
  const target = document.getElementById("rendered")


//                     _           
//                    | |          
//  _ __ ___  __ _  __| | ___ _ __ 
// | '__/ _ \/ _` |/ _` |/ _ \ '__|
// | | |  __/ (_| | (_| |  __/ |   
// |_|  \___|\__,_|\__,_|\___|_|   
//                                 
//                                   

  function update () {
    User_input = document.getElementById("content").value;
    console.log(User_input);
    stringToArray(User_input);
  }

  function stringToArray(str) {
    lines = [];
    var main_string = str.split('\n');
    console.log(main_string);

    for (var i = 0; i < main_string.length; i++) {
    var line = main_string[i].split("") ;
    lines.push(line);
    }
    console.log(lines);

    reader();
  }


//    _       _                           _            
//   (_)     | |                         | |           
//    _ _ __ | |_ ___ _ __ _ __  _ __ ___| |_ ___ _ __ 
//   | | '_ \| __/ _ \ '__| '_ \| '__/ _ \ __/ _ \ '__|
//   | | | | | ||  __/ |  | |_) | | |  __/ ||  __/ |   
//   |_|_| |_|\__\___|_|  | .__/|_|  \___|\__\___|_|   
//                        | |                          
//                        |_|                           




function reader(){

  target.innerHTML = ""

  for (var i = 0; i < lines.length; i++) {
    var number_of_hashtags = 0
    var line_array = lines[i];


    //check for #

    var hashtag = true
    while (hashtag === true) {
      if(line_array[0] === "#"){
        number_of_hashtags++;
        line_array.shift();
      }
      else{
        hashtag = false;
      }
    }





    ///check for ---
    var slash = true
    while (slash === true) {
      if(line_array[0] === "-" && line_array[1] === "-" && line_array[2] === "-"){
        const newElement = document.createElement("hr");
        target.append(newElement)
        line_array.splice(0, 3)
        break
      }
      else{
        slash = false;
      }
    }



  const last_letter = line_array.length - 1;

  function wrapers(wrapper, tag){
      if (line_array[0] === wrapper && line_array[last_letter] === wrapper) {
      const line = line_array.join("");
      const trimmed = line.slice(1, -1);

      const bold = document.createElement(tag);
      bold.textContent = trimmed;

      const paragraph = document.createElement("p");
      paragraph.id = "important";
      paragraph.appendChild(bold);
      target.appendChild(paragraph);

      line_array.splice(0, line_array.length);
      return true;
    }
    return false;
  }
  if(
    wrapers("*","b")||
    wrapers("^","i")||
    wrapers("~","s")
  ){
    continue;
  }

  if(line_array[0] === "n" && line_array[last_letter] === "/"){
    console.log("works")
    const newElement = document.createElement("p");
    // newElement.textContent = "&nbsp;"
    newElement.id = "important";
    target.append(newElement)
    line_array.splice(0, line_array.length);
  }

        
  if(number_of_hashtags > 0){
    var line = line_array.join("")
    var hTag = "h" + number_of_hashtags

    const newElement = document.createElement(hTag);
    newElement.textContent = line;
    target.append(newElement)  
  }
  else{
    var line = line_array.join("")
    const newElement = document.createElement("p");
    newElement.textContent = line;
    target.append(newElement)
  }  




    
  }
  
const paragraphs = target.querySelectorAll('p');

paragraphs.forEach(p => {
  if (p.id !== "important" && p.textContent.trim() === '') {
    p.remove();
  }
});


}
  
  </script>