<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Marked in the browser</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>


  <div id="container">

    <div id="place">
      <textarea name="input" id="content"></textarea>
      <button onclick="update()">Goooo</button>
    </div>

    <div id="rendered">
    </div>

  </div>  



  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</body>
</html>


  <script>
  var User_input = "";
  var lines = [];
  var number_of_hashtags = 0
  const target = document.getElementById("rendered")


//                     _           
//                    | |          
//  _ __ ___  __ _  __| | ___ _ __ 
// | '__/ _ \/ _` |/ _` |/ _ \ '__|
// | | |  __/ (_| | (_| |  __/ |   
// |_|  \___|\__,_|\__,_|\___|_|   
//                                 
//                                   

  function update () {
    User_input = document.getElementById("content").value;
    console.log(User_input);
    stringToArray(User_input);
  }

  function stringToArray(str) {
    lines = [];
    var main_string = str.split('\n');
    console.log(main_string);

    for (var i = 0; i < main_string.length; i++) {
    var line = main_string[i].split("") ;
    lines.push(line);
    }
    console.log(lines);

    debil(); // Call debil after processing the array
  }


//    _       _                           _            
//   (_)     | |                         | |           
//    _ _ __ | |_ ___ _ __ _ __  _ __ ___| |_ ___ _ __ 
//   | | '_ \| __/ _ \ '__| '_ \| '__/ _ \ __/ _ \ '__|
//   | | | | | ||  __/ |  | |_) | | |  __/ ||  __/ |   
//   |_|_| |_|\__\___|_|  | .__/|_|  \___|\__\___|_|   
//                        | |                          
//                        |_|                           

  function debil() {
    target.innerHTML = ""

    for (var i = 0; i < lines.length; i++) {
      if(lines[i][0] === "#"){
        number_of_hashtags++
      }
      else{
        break
      }
    }
    
    if(number_of_hashtags > 0){
      var line_array = lines[i];
      line_array.splice(0, number_of_hashtags + 1);
          var line = line_array.join("")
          

          var h_something = "h" + number_of_hashtags
          
          const newElement = document.createElement(h_something);
          newElement.textContent = line;
          target.append(newElement)
    }
    else{
      var line = lines[i].join("")

      const newElement = document.createElement('p');
      newElement.textContent = line;
      target.append(newElement)
    }
  
  }
  </script>